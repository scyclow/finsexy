<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title></title>

  <style type="text/css">
    * {
      padding: 0;
      margin: 0;
    }

    body {
      background: #000;
      color: #fff;
    }
    #messageSelector .active {
      background: #ff00c7;
      color: #fff;
    }

    #messageSelector {
      list-style-type: none;
    }
    #messageSelector li {
      cursor: pointer;
      border: 1px dashed;
      padding: 1em;
    }

    .chat-window.display-none {
      display: none;
    }

    .chat-window {
      height: calc(100% - 2px);
    }

    #chatWindow {
      height: 100vh;
      width: 100%;
    }

    main {
      display: flex;
    }
  </style>
</head>
<body>
  <main>
    <aside>
      <ul id="messageSelector">

      </ul>
    </aside>

    <section id="chatWindow">

    </section>

  </main>


<!--
    <react-style-component id="component1"></react-style-component>
    <react-style-component id="component2"></react-style-component>
    <react-style-component id="component3"></react-style-component>

    <div>hello</div> -->
</body>

<script src="./$.js"></script>
<script src="./utils.js"></script>
<script src="./conversationRunner.js"></script>



<script type="text/javascript">

  const $messageSelector = $.id('messageSelector')
  const $chatWindow = $.id('chatWindow')

  const messageNames = [
    'heatherHot',
    'cagla',
    'samanthaJones'
  ]

  $messageSelector.innerHTML = messageNames.map(m => `
    <li
      id="${m}-select"
      class="message-selector"
      onclick="onConvoSelect('${m}')"
    >
      ${m}
    </li>
  `).join('')

  $messageSelector.innerHTML += `
    <li>
      <button onclick="localStorage.clear(); window.location.reload()">clear</button>
    </li>
  `

  $chatWindow.innerHTML = messageNames.map(m => `
    <chat-window id="${m}-chat" class="chat-window"></chat-window>
  `).join('')


  const onConvoSelect = (id) => {
    $.cls('message-selector').forEach(ms => {
      ms.classList.remove('active')
    })

    $.cls('chat-window').forEach(cw => {
      console.log(cw)
      cw.classList.add('display-none')
    })

    $.id(id + '-select').classList.add('active')
    $.id(id + '-chat').classList.remove('display-none')
  }

  onConvoSelect('heatherHot')

  // $heatherHotSelect.onclick = () => {
  //   $heatherHotSelect.classList.add
  // }












// const ApplicationStateHandlers = []
// const ApplicationState = {
//   chat: {
//     active: 'heatherHot',
//     participants: {
//       heatherHot: [],
//       CandyCrush: [],
//       GoddessJessica: [],
//     }
//   },
// }

// const getState = path => path.split('.').reduce((s, p) => s[p], ApplicationState)

// const updateState = (path, value) => {
//   const pathVals = path.split('.')
//   const node = pathVals.slice(0, -1).reduce((s, p) => s[p], ApplicationState)
//   const lastProp = pathVals.slice(-1)[0]
//   node[lastProp] = value


//   ApplicationStateHandlers.forEach(handler => handler(ApplicationState))
// }



// class ChatContext {
//   constructor() {
//     this.history = []
//     this.warnings = 0
//     this.stack = []

//   }
// }
</script>


<script src="./chats/heatherHot.js"></script>
<script src="./chats/cagla.js"></script>
<script src="./chats/samanthaJones.js"></script>
























</html>